---
---
<div id="search-container" class="w-full">
    <div id="search-box"></div>
</div>

<script is:inline>
  function initSearch() {
    if (typeof PagefindUI !== 'undefined') {
        new PagefindUI({ 
            element: "#search-box", 
            showSubResults: true,
            resetFilters: true,
            translations: {
                placeholder: "Search knowledge base..."
            }
        });
        
        // Auto-focus the search input
        setTimeout(() => {
            const searchInput = document.querySelector(".pagefind-ui__search-input");
            if (searchInput) {
                searchInput.focus();
            }
        }, 100);
    } else {
        const container = document.querySelector("#search-box");
        if (container) {
            container.innerHTML = `
                <div class="text-sm text-secondary p-4 text-center border border-dashed border-slate-200 dark:border-slate-800 rounded-lg">
                    Search available after build
                </div>
            `;
        }
    }
  }

  window.addEventListener('DOMContentLoaded', initSearch);
</script>

<style is:global>
  @reference "../../styles/global.css";

  :root {
    --pagefind-ui-primary: #4382ff;
    --pagefind-ui-text: #0f172a;
    --pagefind-ui-background: #ffffff;
    --pagefind-ui-border: #e2e8f0;
    --pagefind-ui-tag: #f1f5f9;
  }

  .dark {
    --pagefind-ui-primary: #4382ff;
    --pagefind-ui-text: #ffffff;
    --pagefind-ui-background: #1e293b;
    --pagefind-ui-border: #334155;
    --pagefind-ui-tag: #334155;
  }

  #search-box .pagefind-ui__search-input {
    @apply border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 text-base focus:ring-blueprint-blue/10 focus:border-blueprint-blue transition-all py-4 px-16;
    border-radius: 0.5rem;
  }

  #search-box .pagefind-ui__result-link {
    @apply text-terminal-dark dark:text-neutral-text-dark font-sans font-bold hover:text-blueprint-blue transition-colors text-xl tracking-tight;
  }

  #search-box .pagefind-ui__result-excerpt {
    @apply text-neutral-text-light dark:text-neutral-metadata-dark text-sm mt-2 font-sans leading-relaxed;
  }
  
  #search-box .pagefind-ui__result {
    @apply border-b border-slate-100 dark:border-slate-800 pb-8 mb-8 last:border-0;
  }

  #search-box .pagefind-ui__message {
    @apply text-neutral-text-light dark:text-neutral-metadata-dark text-sm;
  }

  #search-box .pagefind-ui__drawer {
    @apply border-t border-slate-200 dark:border-slate-700 mt-4 pt-4;
  }

  #search-box .pagefind-ui__result-title {
    @apply text-terminal-dark dark:text-neutral-text-dark font-sans font-medium;
  }

  #search-box .pagefind-ui__result-tag {
    @apply bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-slate-300 text-xs px-2 py-1 rounded;
  }
</style>
