---
interface Props {
    sortedYears: Array<{
        year: number;
        count: number;
        activityCount: number;
        months: number[];
    }>;
}

const { sortedYears } = Astro.props;
---

<div class="flex flex-col items-start gap-6" id="year-navigation">
    {
        sortedYears.map((yearData) => (
            <div class="year-item group">
                <button
                    class="year-btn text-sm font-bold text-slate-400 dark:text-slate-600 hover:text-black dark:hover:text-white transition-all cursor-pointer"
                    data-year={yearData.year}
                >
                    {yearData.year}
                </button>
                
                <div class="month-submenu hidden mt-2 flex flex-col items-start gap-2">
                    <div class="w-6 h-0.5 bg-black dark:bg-white mt-1"></div>
                    {yearData.months.map((month) => (
                        <button
                            class="month-btn text-[10px] uppercase tracking-widest text-slate-400 hover:text-black dark:hover:text-white transition-colors text-left"
                            data-month={new Date(yearData.year, month).toLocaleDateString("en-US", {
                                year: "numeric",
                                month: "long",
                            })}
                            data-year={yearData.year}
                        >
                            {new Date(yearData.year, month).toLocaleDateString("en-US", { month: "short" })}
                        </button>
                    ))}
                </div>
            </div>
        ))
    }
</div>

<style>
    @reference "../styles/global.css";
    /* Active states are primarily handled by CSS in Layout.astro using [data-selected-year] */
    .year-btn.active {
        @apply text-black dark:text-white;
    }
</style>
