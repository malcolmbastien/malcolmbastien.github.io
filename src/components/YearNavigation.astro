---
interface Props {
    sortedYears: Array<{
        year: number;
        count: number;
        activityCount: number;
        months: number[];
    }>;
}

const { sortedYears } = Astro.props;
---

<ul class="space-y-4 text-sm font-medium" id="year-navigation">
    {
        sortedYears.map((yearData, index) => (
            <li class="year-item">
                <button
                    class="year-btn text-slate-400 dark:text-slate-600 hover:text-slate-600 dark:hover:text-slate-400 transition-colors flex items-center gap-2"
                    data-year={yearData.year}
                >
                    {yearData.year}
                    {index === 0 && <span class="w-1.5 h-1.5 bg-primary rounded-full"></span>}
                </button>
                
                <div class="month-submenu hidden mt-2 flex flex-col items-start gap-1.5 pl-4 border-l border-slate-200 dark:border-slate-800">
                    {yearData.months.map((month) => (
                        <button
                            class="month-btn text-xs font-medium text-slate-400 hover:text-primary dark:hover:text-blue-400 transition-colors text-left"
                            data-month={new Date(yearData.year, month).toLocaleDateString("en-US", {
                                year: "numeric",
                                month: "long",
                            })}
                            data-year={yearData.year}
                        >
                            {new Date(yearData.year, month).toLocaleDateString("en-US", { month: "short" })}
                        </button>
                    ))}
                </div>
            </li>
        ))
    }
    <li>
        <a href="#" class="text-slate-400 dark:text-slate-600 hover:text-slate-600 dark:hover:text-slate-400 text-sm">Older</a>
    </li>
</ul>

<style>
    @reference "../styles/global.css";
    
    .year-btn.active {
        @apply text-primary dark:text-blue-400 font-bold;
    }
</style>
