---
import { stages } from "../../lib/theme";

interface Props {
    counts: {
        all: number;
        seed: number;
        sprout: number;
        evergreen: number;
    };
}

const { counts } = Astro.props;

// Extract dot colors from stages
const seedColor = stages.seed.colors.dot;
const sproutColor = stages.sprout.colors.dot;
const evergreenColor = stages.evergreen.colors.dot;

// Calculate percentages based on total
const seedPercent = counts.all > 0 ? (counts.seed / counts.all) * 100 : 0;
const sproutPercent = counts.all > 0 ? (counts.sprout / counts.all) * 100 : 0;
const evergreenPercent = counts.all > 0 ? (counts.evergreen / counts.all) * 100 : 0;
---

<div class="bg-slate-100 dark:bg-slate-800/50 p-6 rounded-2xl border border-slate-200 dark:border-slate-700">
    <h4 class="text-base font-semibold text-slate-800 dark:text-slate-200 mb-6">Note Types</h4>
    
    <div class="space-y-6">
        <div>
            <div class="flex items-center justify-between mb-2">
                <span class="text-sm font-semibold text-slate-800 dark:text-slate-200">Seed</span>
                <span class="text-xs font-mono text-slate-600 dark:text-slate-400">{counts.seed.toString().padStart(3, '0')}</span>
            </div>
            <div class="h-1 bg-slate-300 dark:bg-slate-600 rounded-full overflow-hidden">
                <div class={`h-full ${seedColor} rounded-full transition-all duration-500`} style={`width: ${seedPercent}%`}></div>
            </div>
            <p class="text-xs text-slate-600 dark:text-slate-400 mt-2 leading-relaxed">Rough ideas and early drafts</p>
        </div>
        
        <div>
            <div class="flex items-center justify-between mb-2">
                <span class="text-sm font-semibold text-slate-800 dark:text-slate-200">Sprout</span>
                <span class="text-xs font-mono text-slate-600 dark:text-slate-400">{counts.sprout.toString().padStart(3, '0')}</span>
            </div>
            <div class="h-1 bg-slate-300 dark:bg-slate-600 rounded-full overflow-hidden">
                <div class={`h-full ${sproutColor} rounded-full transition-all duration-500`} style={`width: ${sproutPercent}%`}></div>
            </div>
            <p class="text-xs text-slate-600 dark:text-slate-400 mt-2 leading-relaxed">Developing concepts</p>
        </div>
        
        <div>
            <div class="flex items-center justify-between mb-2">
                <span class="text-sm font-semibold text-slate-800 dark:text-slate-200">Evergreen</span>
                <span class="text-xs font-mono text-slate-600 dark:text-slate-400">{counts.evergreen.toString().padStart(3, '0')}</span>
            </div>
            <div class="h-1 bg-slate-300 dark:bg-slate-600 rounded-full overflow-hidden">
                <div class={`h-full ${evergreenColor} rounded-full transition-all duration-500`} style={`width: ${evergreenPercent}%`}></div>
            </div>
            <p class="text-xs text-slate-600 dark:text-slate-400 mt-2 leading-relaxed">Polished, reliable notes</p>
        </div>
    </div>
</div>
