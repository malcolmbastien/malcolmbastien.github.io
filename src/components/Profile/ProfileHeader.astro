---
import { getCollection, type CollectionEntry } from "astro:content";
import { theme } from "../../lib/theme";
import { Picture } from "astro:assets";

const notes = await getCollection("notes");
const publishedNotes = notes.filter((note) => note.data);
const counts = {
    all: publishedNotes.length,
    seed: publishedNotes.filter(
        (n: CollectionEntry<"notes">) => n.data.stage === "seed",
    ).length,
    sprout: publishedNotes.filter(
        (n: CollectionEntry<"notes">) => n.data.stage === "sprout",
    ).length,
    evergreen: publishedNotes.filter(
        (n: CollectionEntry<"notes">) => n.data.stage === "evergreen",
    ).length,
};

const gravatarUrl =
    "https://www.gravatar.com/avatar/81a9730219e8014268c171f772fa1741?s=128&d=identicon";

const isHome = Astro.url.pathname === "/" || Astro.url.pathname === "/index.html";
const TitleTag = isHome ? "h1" : "div";
---

<div
    class="flex flex-col md:flex-row items-center justify-center md:justify-start gap-10"
    data-pagefind-ignore
>
    <div class="relative group shrink-0">
        <Picture
            src={gravatarUrl}
            alt="Avatar"
            inferSize={true}
            loading="eager"
            class="w-40 h-40 border-8 border-terminal-dark relative z-10 shadow-[8px_8px_0_0_#4382ff]"
        />
    </div>
    <div class="flex-1 text-center md:text-left">
        <div class="mb-4">
            <TitleTag class="text-6xl font-serif font-black text-blueprint-blue tracking-tighter uppercase leading-none">
                <a
                    href="/"
                    class="hover:text-blueprint-blue transition-colors"
                    >Malcolm<br/>Bastien</a
                >
            </TitleTag>
        </div>
        <p class="font-sans text-lg text-slate-500 dark:text-slate-500 max-w-xl leading-relaxed italic">
            Mapping the intersection of high-trust human systems and technical throughput.
        </p>
    </div>
</div>
