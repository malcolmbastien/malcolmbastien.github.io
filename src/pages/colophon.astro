---
import Layout from "../layouts/Layout.astro";
import BackToGarden from "../components/Navigation/BackToGarden.astro";
import SiteFooter from "../components/SiteFooter.astro";

const packages = [
    {
        name: "Astro",
        description: "The web framework for content-driven websites.",
        link: "https://astro.build",
    },
    {
        name: "Tailwind CSS",
        description: "A utility-first CSS framework for rapid UI development.",
        link: "https://tailwindcss.com",
    },
    {
        name: "Pagefind",
        description: "A fully static search library that works without a server.",
        link: "https://pagefind.app",
    },
    {
        name: "Simple Git",
        description: "Used to extract file history and dates directly from the git repository.",
        link: "https://github.com/steveukx/git-js",
    },
    {
        name: "@astrojs/sitemap",
        description: "Automatically generates a sitemap for better SEO.",
        link: "https://docs.astro.build/en/guides/integrations-guide/sitemap/",
    },
    {
        name: "Remark & Unist",
        description: "Powerful tools for processing Markdown and building custom content features.",
        link: "https://remark.js.org/",
    }
];
---

<Layout
    title="Colophon | Digital Garden"
    description="Information about how this website was built and the tools used in its creation."
    type="website"
>
    <main class="max-w-7xl mx-auto px-6 py-12 grid grid-cols-1 lg:grid-cols-12 gap-12" data-pagefind-ignore>
        <!-- Left Sidebar: Navigation -->
        <aside class="hidden lg:block lg:col-span-3 sticky top-24 h-fit">
            <nav class="space-y-1" id="colophon-nav">
                <p class="text-[10px] font-bold text-slate-400 dark:text-slate-500 uppercase tracking-widest mb-4">On this page</p>
                <a class="sidebar-link block py-2 text-sm text-slate-500 dark:text-slate-400 hover:text-black dark:hover:text-white transition-colors font-medium active" href="#intro">Intro</a>
                <a class="sidebar-link block py-2 text-sm text-slate-500 dark:text-slate-400 hover:text-black dark:hover:text-white transition-colors font-medium" href="#development">Development</a>
                <a class="sidebar-link block py-2 text-sm text-slate-500 dark:text-slate-400 hover:text-black dark:hover:text-white transition-colors font-medium" href="#writing">Writing</a>
                <a class="sidebar-link block py-2 text-sm text-slate-500 dark:text-slate-400 hover:text-black dark:hover:text-white transition-colors font-medium" href="#hosting">Hosting</a>
                <a class="sidebar-link block py-2 text-sm text-slate-500 dark:text-slate-400 hover:text-black dark:hover:text-white transition-colors font-medium" href="#typography">Typography</a>
                <a class="sidebar-link block py-2 text-sm text-slate-500 dark:text-slate-400 hover:text-black dark:hover:text-white transition-colors font-medium" href="#techstack">Tech Stack</a>
            </nav>
            <div class="mt-12 pt-8 border-t border-slate-200 dark:border-slate-800">
                <BackToGarden />
            </div>
        </aside>

        <!-- Main Content -->
        <div class="lg:col-span-9" data-pagefind-body>
            <header class="mb-16 scroll-mt-24" id="intro">
                <h1 class="text-5xl md:text-6xl font-bold text-slate-900 dark:text-white mb-6" style="font-family: 'Space Grotesk', sans-serif;">Colophon</h1>
                <p class="text-xl md:text-2xl text-slate-600 dark:text-slate-400 leading-relaxed max-w-2xl italic font-serif">
                    This website is a digital garden ‚Äî a collection of thoughts, notes, and experiments. It is designed to be fast, accessible, and easy to maintain.
                </p>
            </header>

            <div class="space-y-20">
                <!-- Development & Tools -->
                <section class="scroll-mt-24" id="development">
                    <div class="flex items-center gap-4 mb-8">
                        <div class="h-px grow bg-slate-200 dark:bg-slate-800"></div>
                        <h2 class="text-xs font-bold uppercase tracking-[0.2em] text-slate-400 dark:text-slate-500 flex items-center gap-2 whitespace-nowrap">
                            üõ†Ô∏è Development & Tools
                        </h2>
                        <div class="h-px grow bg-slate-200 dark:bg-slate-800"></div>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <a href="https://zed.dev/" target="_blank" rel="noopener noreferrer" class="bg-white dark:bg-navy-800 p-8 rounded-2xl border border-slate-200 dark:border-slate-700 shadow-sm hover:shadow-md transition-all group">
                            <h3 class="text-lg font-bold mb-3 text-slate-900 dark:text-white group-hover:text-blueprint-blue dark:group-hover:text-blue-400 transition-colors">Zed</h3>
                            <p class="text-slate-600 dark:text-slate-400 text-sm leading-relaxed">The primary code editor used for building this site. Zed's high-performance and collaborative features make it an ideal choice for modern web development.</p>
                        </a>
                        <a href="https://opencode.ai/" target="_blank" rel="noopener noreferrer" class="bg-white dark:bg-navy-800 p-8 rounded-2xl border border-slate-200 dark:border-slate-700 shadow-sm hover:shadow-md transition-all group">
                            <h3 class="text-lg font-bold mb-3 text-slate-900 dark:text-white group-hover:text-blueprint-blue dark:group-hover:text-blue-400 transition-colors">Open Code AI</h3>
                            <p class="text-slate-600 dark:text-slate-400 text-sm leading-relaxed">Much of the implementation and technical structure was developed with the assistance of Open Code AI, an interactive coding tool that helps translate ideas into functional code.</p>
                        </a>
                    </div>
                </section>

                <!-- Writing Workflow -->
                <section class="scroll-mt-24" id="writing">
                    <div class="flex items-center gap-4 mb-8">
                        <div class="h-px grow bg-slate-200 dark:bg-slate-800"></div>
                        <h2 class="text-xs font-bold uppercase tracking-[0.2em] text-slate-400 dark:text-slate-500 flex items-center gap-2 whitespace-nowrap">
                            ‚úçÔ∏è Writing Workflow
                        </h2>
                        <div class="h-px grow bg-slate-200 dark:bg-slate-800"></div>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <a href="https://obsidian.md/" target="_blank" rel="noopener noreferrer" class="bg-white dark:bg-navy-800 p-8 rounded-2xl border border-slate-200 dark:border-slate-700 shadow-sm hover:shadow-md transition-all group">
                            <h3 class="text-lg font-bold mb-3 text-slate-900 dark:text-white group-hover:text-blueprint-blue dark:group-hover:text-blue-400 transition-colors">Obsidian</h3>
                            <p class="text-slate-600 dark:text-slate-400 text-sm leading-relaxed">All blog posts and notes are written in Markdown using Obsidian. This allows for a seamless connection between personal notes and publicly shared content.</p>
                        </a>
                        <a href="https://github.com/denolehov/obsidian-git" target="_blank" rel="noopener noreferrer" class="bg-white dark:bg-navy-800 p-8 rounded-2xl border border-slate-200 dark:border-slate-700 shadow-sm hover:shadow-md transition-all group">
                            <h3 class="text-lg font-bold mb-3 text-slate-900 dark:text-white group-hover:text-blueprint-blue dark:group-hover:text-blue-400 transition-colors">Obsidian Git Plugin</h3>
                            <p class="text-slate-600 dark:text-slate-400 text-sm leading-relaxed">The site's content is pushed directly from Obsidian to GitHub using the Obsidian Git plugin, enabling a "write and publish" workflow without leaving the writing environment.</p>
                        </a>
                    </div>
                </section>

                <!-- Hosting & Deployment -->
                <section class="scroll-mt-24" id="hosting">
                    <div class="flex items-center gap-4 mb-8">
                        <div class="h-px grow bg-slate-200 dark:bg-slate-800"></div>
                        <h2 class="text-xs font-bold uppercase tracking-[0.2em] text-slate-400 dark:text-slate-500 flex items-center gap-2 whitespace-nowrap">
                            üöÄ Hosting & Deployment
                        </h2>
                        <div class="h-px grow bg-slate-200 dark:bg-slate-800"></div>
                    </div>
                    <a href="https://pages.github.com/" target="_blank" rel="noopener noreferrer" class="block bg-white dark:bg-navy-800 p-8 rounded-2xl border border-slate-200 dark:border-slate-700 shadow-sm hover:shadow-md transition-all group">
                        <h3 class="text-lg font-bold mb-3 text-slate-900 dark:text-white group-hover:text-blueprint-blue dark:group-hover:text-blue-400 transition-colors">GitHub Pages</h3>
                        <p class="text-slate-600 dark:text-slate-400 text-sm leading-relaxed">The site is hosted on GitHub Pages. Every time content is pushed to the main branch, a GitHub Action triggers a build process that generates the static site and deploys it automatically.</p>
                    </a>
                </section>

                <!-- Typography -->
                <section class="scroll-mt-24" id="typography">
                    <div class="flex items-center gap-4 mb-8">
                        <div class="h-px grow bg-slate-200 dark:bg-slate-800"></div>
                        <h2 class="text-xs font-bold uppercase tracking-[0.2em] text-slate-400 dark:text-slate-500 flex items-center gap-2 whitespace-nowrap">
                            üî° Typography
                        </h2>
                        <div class="h-px grow bg-slate-200 dark:bg-slate-800"></div>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 gap-6">
                        <a href="https://fonts.google.com/specimen/Space+Grotesk" target="_blank" rel="noopener noreferrer" class="bg-white dark:bg-navy-800 p-8 rounded-2xl border border-slate-200 dark:border-slate-700 shadow-sm hover:shadow-md transition-all group">
                            <h3 class="text-lg font-bold mb-3 text-slate-900 dark:text-white group-hover:text-blueprint-blue dark:group-hover:text-blue-400 transition-colors">Space Grotesk</h3>
                            <p class="text-slate-600 dark:text-slate-400 text-sm leading-relaxed">Used for page titles and note headers. A geometric sans-serif with distinctive character shapes that adds personality to headlines.</p>
                        </a>
                        <a href="https://fonts.google.com/specimen/Inter" target="_blank" rel="noopener noreferrer" class="bg-white dark:bg-navy-800 p-8 rounded-2xl border border-slate-200 dark:border-slate-700 shadow-sm hover:shadow-md transition-all group">
                            <h3 class="text-lg font-bold mb-3 text-slate-900 dark:text-white group-hover:text-blueprint-blue dark:group-hover:text-blue-400 transition-colors">Inter</h3>
                            <p class="text-slate-600 dark:text-slate-400 text-sm leading-relaxed">Used for UI elements and body text. A modern geometric sans-serif typeface that provides excellent readability at all sizes.</p>
                        </a>
                        <a href="https://fonts.google.com/specimen/Source+Serif+4" target="_blank" rel="noopener noreferrer" class="bg-white dark:bg-navy-800 p-8 rounded-2xl border border-slate-200 dark:border-slate-700 shadow-sm hover:shadow-md transition-all group">
                            <h3 class="text-lg font-bold mb-3 text-slate-900 dark:text-white group-hover:text-blueprint-blue dark:group-hover:text-blue-400 transition-colors">Source Serif 4</h3>
                            <p class="text-slate-600 dark:text-slate-400 text-sm leading-relaxed">Used for long-form prose and descriptions. An elegant serif designed for high-quality reading experiences on screens.</p>
                        </a>
                        <a href="https://fonts.google.com/specimen/JetBrains+Mono" target="_blank" rel="noopener noreferrer" class="bg-white dark:bg-navy-800 p-8 rounded-2xl border border-slate-200 dark:border-slate-700 shadow-sm hover:shadow-md transition-all group">
                            <h3 class="text-lg font-bold mb-3 text-slate-900 dark:text-white group-hover:text-blueprint-blue dark:group-hover:text-blue-400 transition-colors">JetBrains Mono</h3>
                            <p class="text-slate-600 dark:text-slate-400 text-sm leading-relaxed">Used for code blocks and technical metadata. A highly legible monospaced font specifically designed for developers.</p>
                        </a>
                    </div>
                </section>

                <!-- Tech Stack -->
                <section class="scroll-mt-24" id="techstack">
                    <div class="flex items-center gap-4 mb-8">
                        <div class="h-px grow bg-slate-200 dark:bg-slate-800"></div>
                        <h2 class="text-xs font-bold uppercase tracking-[0.2em] text-slate-400 dark:text-slate-500 flex items-center gap-2 whitespace-nowrap">
                            üì¶ Technology Stack
                        </h2>
                        <div class="h-px grow bg-slate-200 dark:bg-slate-800"></div>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                        {packages.map((pkg) => (
                            <a href={pkg.link} target="_blank" rel="noopener noreferrer" class="bg-white dark:bg-navy-800 p-6 rounded-xl border border-slate-200 dark:border-slate-700 shadow-sm transition-all group hover:shadow-md">
                                <h4 class="font-mono text-sm font-bold mb-2 text-slate-900 dark:text-white group-hover:text-blueprint-blue dark:group-hover:text-blue-400">{pkg.name}</h4>
                                <p class="font-mono text-xs text-slate-500 dark:text-slate-400 leading-relaxed">{pkg.description}</p>
                            </a>
                        ))}
                    </div>
                </section>
            </div>
        </div>
    </main>
    <SiteFooter />
</Layout>

<style is:global>
    @reference "../styles/global.css";

    .sidebar-link.active {
        @apply text-blueprint-blue dark:text-blue-400 font-bold;
    }
</style>

<script>
    // Simple scroll spy for sidebar highlighting
    const sections = document.querySelectorAll('section[id], header[id]');
    const navLinks = document.querySelectorAll('.sidebar-link');

    function updateActiveLink() {
        let current = '';
        sections.forEach(section => {
            const sectionTop = (section as HTMLElement).offsetTop;
            if (window.scrollY >= sectionTop - 150) {
                current = section.getAttribute('id') || '';
            }
        });

        navLinks.forEach(link => {
            link.classList.remove('active');
            if (link.getAttribute('href') === `#${current}`) {
                link.classList.add('active');
            }
        });
    }

    window.addEventListener('scroll', updateActiveLink);
    // Run once on load
    updateActiveLink();

    // Handle clicks to avoid breaking "Back" button behavior
    document.querySelectorAll('.sidebar-link').forEach(link => {
        link.addEventListener('click', (e) => {
            const href = link.getAttribute('href');
            if (!href || !href.startsWith('#')) return;

            e.preventDefault();
            const targetId = href.substring(1);
            const targetElement = document.getElementById(targetId);

            if (targetElement) {
                // Update URL without adding to history
                history.replaceState(null, '', href);

                // Smooth scroll to target
                targetElement.scrollIntoView({
                    behavior: 'smooth',
                    block: 'start'
                });
            }
        });
    });
</script>
