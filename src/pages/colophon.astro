---
import Layout from "../layouts/Layout.astro";
import Header from "../components/Profile/Header.astro";
import BackToGarden from "../components/Navigation/BackToGarden.astro";
import SiteFooter from "../components/SiteFooter.astro";
import { getCollection } from "astro:content";
import ActivityHeatmap from "../components/Profile/ActivityHeatmap.astro";

const allNotes = await getCollection("notes");
const currentYear = new Date().getFullYear();

const events = allNotes
    .filter((note) => note.data.publishedDate)
    .map((note) => ({
        post: note,
        type: "created",
        date: note.data.publishedDate!,
        title: note.data.title,
    }));

const packages = [
    {
        name: "Astro",
        description: "The web framework for content-driven websites.",
        link: "https://astro.build",
    },
    {
        name: "Tailwind CSS",
        description: "A utility-first CSS framework for rapid UI development.",
        link: "https://tailwindcss.com",
    },
    {
        name: "Pagefind",
        description: "A fully static search library that works without a server.",
        link: "https://pagefind.app",
    },
    {
        name: "Simple Git",
        description: "Used to extract file history and dates directly from the git repository.",
        link: "https://github.com/steveukx/git-js",
    },
    {
        name: "@astrojs/sitemap",
        description: "Automatically generates a sitemap for better SEO.",
        link: "https://docs.astro.build/en/guides/integrations-guide/sitemap/",
    },
    {
        name: "Remark & Unist",
        description: "Powerful tools for processing Markdown and building custom content features.",
        link: "https://remark.js.org/",
    }
];
---

<Layout
    title="Colophon - Malcolm Bastien"
    description="Information about how this website was built and the tools used in its creation."
    type="website"
>
    <main class="max-w-(--breakpoint-2xl) mx-auto p-4 md:p-8" data-pagefind-ignore>
        <Header currentPath={Astro.url.pathname}>
            <ActivityHeatmap
                slot="heatmap"
                year={currentYear}
                events={events}
            />
        </Header>

        <div class="grid grid-cols-1 lg:grid-cols-12 gap-10">
            <div class="lg:col-span-3">
                <div class="lg:sticky lg:top-24">
                    <BackToGarden />
                </div>
            </div>

            <div class="lg:col-span-9 max-w-4xl">
                <header class="mb-16">
                    <h1 class="text-6xl font-serif font-black text-terminal-dark dark:text-white tracking-tighter mb-6">
                        Colophon
                    </h1>
                    <p class="text-xl font-sans text-slate-500 dark:text-slate-400 italic leading-relaxed">
                        This website is a digital garden‚Äîa collection of thoughts, notes, and experiments. It is designed to be fast, accessible, and easy to maintain.
                    </p>
                </header>

                <div class="space-y-20">
                    <section>
                        <h2 class="text-xs font-sans font-bold text-slate-500 dark:text-slate-400 mb-10 flex items-center gap-4 tracking-widest uppercase">
                            <div class="w-8 h-[1px] bg-slate-200 dark:bg-slate-700"></div>
                            üõ†Ô∏è Development & Tools
                        </h2>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                            <div class="card-blueprint p-8 bg-white dark:bg-slate-800 border-2 border-terminal-dark dark:border-slate-700 shadow-[6px_6px_0_0_#f1f5f9] dark:shadow-none">
                                <h3 class="text-sm font-bold text-terminal-dark dark:text-white mb-4">Zed Editor</h3>
                                <p class="text-sm text-slate-600 dark:text-slate-400 leading-relaxed">The primary code editor used for building this site. Zed's high-performance and collaborative features make it an ideal choice for modern web development.</p>
                            </div>
                            <div class="card-blueprint p-8 bg-white dark:bg-slate-800 border-2 border-terminal-dark dark:border-slate-700 shadow-[6px_6px_0_0_#f1f5f9] dark:shadow-none">
                                <h3 class="text-sm font-bold text-terminal-dark dark:text-white mb-4">Open Code AI</h3>
                                <p class="text-sm text-slate-600 dark:text-slate-400 leading-relaxed">Much of the implementation and technical structure was developed with the assistance of Open Code AI, an interactive coding tool that helps translate ideas into functional code.</p>
                            </div>
                        </div>
                    </section>

                    <section>
                        <h2 class="text-xs font-sans font-bold text-slate-500 dark:text-slate-400 mb-10 flex items-center gap-4 tracking-widest uppercase">
                            <div class="w-8 h-[1px] bg-slate-200 dark:bg-slate-700"></div>
                            ‚úçÔ∏è Writing Workflow
                        </h2>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                            <div class="card-blueprint p-8 bg-white dark:bg-slate-800 border-2 border-terminal-dark dark:border-slate-700 shadow-[6px_6px_0_0_#f1f5f9] dark:shadow-none">
                                <h3 class="text-sm font-bold text-terminal-dark dark:text-white mb-4">Obsidian</h3>
                                <p class="text-sm text-slate-600 dark:text-slate-400 leading-relaxed">All blog posts and notes are written in Markdown using Obsidian. This allows for a seamless connection between personal notes and publicly shared content.</p>
                            </div>
                            <div class="card-blueprint p-8 bg-white dark:bg-slate-800 border-2 border-terminal-dark dark:border-slate-700 shadow-[6px_6px_0_0_#f1f5f9] dark:shadow-none">
                                <h3 class="text-sm font-bold text-terminal-dark dark:text-white mb-4">Obsidian Git Plugin</h3>
                                <p class="text-sm text-slate-600 dark:text-slate-400 leading-relaxed">The site's content is pushed directly from Obsidian to GitHub using the Obsidian Git plugin, enabling a "write and publish" workflow without leaving the writing environment.</p>
                            </div>
                        </div>
                    </section>

                    <section>
                        <h2 class="text-xs font-sans font-bold text-slate-500 dark:text-slate-400 mb-10 flex items-center gap-4 tracking-widest uppercase">
                            <div class="w-8 h-[1px] bg-slate-200 dark:bg-slate-700"></div>
                            üöÄ Hosting & Deployment
                        </h2>
                        <div class="card-blueprint p-8 bg-white dark:bg-slate-800 border-2 border-terminal-dark dark:border-slate-700 shadow-[6px_6px_0_0_#f1f5f9] dark:shadow-none">
                            <h3 class="text-sm font-bold text-terminal-dark dark:text-white mb-4">GitHub Pages</h3>
                            <p class="text-sm text-slate-600 dark:text-slate-400 leading-relaxed">The site is hosted on GitHub Pages. Every time content is pushed to the main branch, a GitHub Action triggers a build process that generates the static site and deploys it automatically.</p>
                        </div>
                    </section>

                    <section>
                        <h2 class="text-xs font-sans font-bold text-slate-500 dark:text-slate-400 mb-10 flex items-center gap-4 tracking-widest uppercase">
                            <div class="w-8 h-[1px] bg-slate-200 dark:bg-slate-700"></div>
                            üî° Typography
                        </h2>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                            <div class="card-blueprint p-8 bg-white dark:bg-slate-800 border-2 border-terminal-dark dark:border-slate-700 shadow-[6px_6px_0_0_#f1f5f9] dark:shadow-none">
                                <h3 class="text-sm font-bold text-terminal-dark dark:text-white mb-4">Bricolage Grotesque</h3>
                                <p class="text-sm text-slate-600 dark:text-slate-400 leading-relaxed">Used for headings and display text. A modern geometric sans-serif typeface that provides excellent readability at all sizes.</p>
                            </div>
                            <div class="card-blueprint p-8 bg-white dark:bg-slate-800 border-2 border-terminal-dark dark:border-slate-700 shadow-[6px_6px_0_0_#f1f5f9] dark:shadow-none">
                                <h3 class="text-sm font-bold text-terminal-dark dark:text-white mb-4">Public Sans</h3>
                                <p class="text-sm text-slate-600 dark:text-slate-400 leading-relaxed">Used for body text and UI elements. A clean, humanist sans-serif designed for government communications and optimized for screen readability.</p>
                            </div>
                        </div>
                    </section>

                    <section>
                        <h2 class="text-xs font-sans font-bold text-slate-500 dark:text-slate-400 mb-10 flex items-center gap-4 tracking-widest uppercase">
                            <div class="w-8 h-[1px] bg-slate-200 dark:bg-slate-700"></div>
                            üì¶ Technology Stack
                        </h2>
                        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 font-mono">
                            {packages.map((pkg) => (
                                <div class="p-6 border border-slate-100 dark:border-slate-700 bg-white dark:bg-slate-800 hover:border-blueprint-blue transition-colors">
                                    <a href={pkg.link} class="text-sm font-bold text-terminal-dark dark:text-white hover:text-blueprint-blue block mb-2">{pkg.name}</a>
                                    <p class="text-xs text-slate-500 dark:text-slate-400 leading-normal">{pkg.description}</p>
                                </div>
                            ))}
                        </div>
                    </section>
                </div>
            </div>
        </div>
        <SiteFooter />
    </main>
</Layout>
