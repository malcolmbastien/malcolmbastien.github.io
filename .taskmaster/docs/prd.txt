<overview>
## Problem Statement
Traditional microblogging (like X/Twitter) is ephemeral and rewards "hot takes" that are quickly forgotten. Traditional blogging (long-form) feels heavy and often static—once a post is published, it's rarely updated. There is no middle ground for "evolving thoughts" or "growing ideas" that start small and mature over time, like a software repository.

## Target Users
Solo developers, researchers, and thinkers who want to document their learning journey in public, treating every thought as a "living document" rather than a one-time broadcast.

## Success Metrics
- 100% static site generation compatible with GitHub Pages.
- Automatic extraction of "version history" from Git commits.
- Visual distinction between "seed" ideas and "mature" posts.
</overview>

---

<functional-decomposition>
## Capability Tree

### Capability: Content Management
Management of the living blog posts stored as Git-tracked Markdown files.

#### Feature: Markdown Processing
- **Description**: Transform Markdown files with YAML frontmatter into structured web pages.
- **Inputs**: `.md` or `.mdx` files in `src/content/posts/`.
- **Outputs**: Rendered HTML pages.
- **Behavior**: Parse title, date, status, and tags from frontmatter; render body content.

#### Feature: Post Status Tracking
- **Description**: Categorize posts by their maturity level (e.g., "Seed", "Sprout", "Tree").
- **Inputs**: `status` field in frontmatter.
- **Outputs**: Visual badges/indicators on the UI.
- **Behavior**: Allow users to filter or sort by maturity.

### Capability: Concept Tracking
Identifying and highlighting core structural elements within a post.

#### Feature: Semantic Block Rendering
- **Description**: Special styling for "Core Ideas", "Open Questions", and "Supporting Evidence".
- **Inputs**: Custom Markdown syntax or specific CSS classes in content.
- **Outputs**: High-contrast, formatted blocks in the post view.
- **Behavior**: Match specific patterns (e.g., `> [!QUESTION]`) and apply unique styling.

### Capability: Evolution Tracking
Visualizing the growth and change of a post over time.

### Capability: Presentation Layer
The GitHub-profile-inspired interface for discovery.

#### Feature: Activity Heatmap
- **Description**: A visual grid showing post updates/creation activity over the year.
- **Inputs**: File modification dates.
- **Outputs**: SVG heatmap grid.
- **Behavior**: Map update frequency to color intensity.
</functional-decomposition>

---

<structural-decomposition>
## Repository Structure

```
repo-blog/
├── src/
│   ├── content/
│   │   ├── posts/          # Markdown files (The "Database")
│   │   └── config.ts       # Astro Content Collections schema
│   ├── components/
│   │   ├── ConceptBlock/   # Semantic block components
│   │   ├── History/        # Git history components
│   │   └── Profile/        # Header and heatmap
│   ├── layouts/
│   └── pages/
├── public/
└── astro.config.mjs
```

## Module Definitions

### Module: Content Engine
- **Maps to capability**: Content Management
- **Responsibility**: Define the schema for posts and handle data fetching.
- **Exports**:
  - `getPosts()`: Fetches and sorts all posts.
  - `getPostBySlug(slug)`: Fetches a single post.

### Module: Evolution Tracker
- **Maps to capability**: Evolution Tracking
- **Responsibility**: Interface with local Git to retrieve file history during build.
- **Exports**:
  - `getFileHistory(path)`: Returns array of `{ date, message, hash }`.

### Module: Theme/UI
- **Maps to capability**: Presentation Layer
- **Responsibility**: Provide the "GitHub-lite" aesthetic.
</structural-decomposition>

---

<dependency-graph>
### Foundation Layer (Phase 0)
- **Astro Setup**: Base framework configuration.
- **Content Schema**: Defining the Zod schema for Markdown frontmatter.

### Data Layer (Phase 1)
- **Markdown Parser**: Depends on [Content Schema].
- **Git History Fetcher**: Depends on [Astro Setup].

### UI Layer (Phase 2)
- **Post Layout**: Depends on [Markdown Parser].
- **Profile Dashboard**: Depends on [Git History Fetcher].
- **Concept Blocks**: Depends on [Post Layout].
</dependency-graph>

---

<implementation-roadmap>
### Phase 0: Foundation
**Goal**: Establish the static site scaffold and content pipeline.

**Tasks**:
- [ ] Initialize Astro project with Tailwind CSS.
- [ ] Define `posts` content collection schema (title, date, status, tags).
- [ ] Create a "Hello World" post.

**Exit Criteria**: Running dev server showing one post list and one post detail page.

### Phase 1: Evolution & Core Logic
**Goal**: Implement the unique "Git-style" features.

**Tasks**:
- [ ] Implement Git history helper using `simple-git` or native `git` commands.
- [ ] Create `ConceptBlock` styles for Markdown alerts (Ideas, Questions, Evidence).
- [ ] Implement "Maturity" filtering on the homepage.

**Exit Criteria**: Posts show their own "commit history" at the bottom of the page.

### Phase 2: Polishing & Deployment
**Goal**: Finalize UI and push to production.

**Tasks**:
- [ ] Build GitHub-style Profile Header and Activity Heatmap.
- [ ] Configure GitHub Actions for deployment to `gh-pages`.

**Exit Criteria**: Site is live on `<user>.github.io/<repo>/`.
</implementation-roadmap>

---

<test-strategy>
## Critical Test Scenarios
### Content Processing
- **Happy path**: Valid Markdown with correct frontmatter renders perfectly.
- **Error case**: Missing required frontmatter (e.g., status) should fail build with clear error.

### Git Integration
- **Edge case**: New post with no commit history yet (should show "Unpublished/Draft").
</test-strategy>

---

<architecture>
## Technology Stack
- **Framework**: Astro (Static Site Generation)
- **Styling**: Tailwind CSS
- **Content**: Markdown/MDX
- **Deployment**: GitHub Pages via GitHub Actions

## Data Models
**Post Schema**:
```typescript
{
  title: string;
  publishedDate: Date;
  updatedDate?: Date;
  status: 'seed' | 'sprout' | 'tree';
  tags: string[];
  summary: string;
}
```
</architecture>

<appendix>
## Open Questions
- Should we use the `lastmod` Git date as the "Last Updated" date automatically?
- Do we want to support "private" seeds that don't get built to the static site?
</appendix>
